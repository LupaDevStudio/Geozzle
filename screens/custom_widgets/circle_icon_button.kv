#:kivy 2.2.1
#:set OFFSET 4

<-CircleIconButton>:

    fit_mode: "cover" # the image will be cropped at the right spot

    canvas:

        Color:
            rgba: WHITE if self.is_selected else TRANSPARENT
        Ellipse:
            pos: (self.pos[0] - OFFSET/2*self.font_ratio, self.pos[1] - OFFSET/2*self.font_ratio)
            size: (self.size[0] + OFFSET, self.size[1] + OFFSET)

        Color:
            rgba: self.color
        StencilPush
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [100]
        StencilUse
        Rectangle:
            texture: self.texture
            size: self.norm_image_size
            pos: self.center_x - self.norm_image_size[0] / 2., self.center_y - self.norm_image_size[1] / 2.
        StencilUnUse
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [100]
        StencilPop
