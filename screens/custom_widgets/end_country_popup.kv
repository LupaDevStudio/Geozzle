#:kivy 2.2.1


<EndCountryPopup>:
    
    RelativeLayout:
        id: popup_layout
       
        ColoredRoundedButton:
            id: ok_button
            size_hint: (0.5, 0.15*6/4.5)
            pos_hint: {"center_x":0.5,"center_y":0.12}
            font_ratio: root.font_ratio
            font_size: SMALL_BUTTON_FONT_SIZE
            text: root.ok_button_label
            text_font_name: PATH_TEXT_FONT
            background_color: root.secondary_color
            color_label: root.primary_color
            release_function: root.confirm
        
        Label:
            id: score_label
            size_hint: (0.8, 0.3)
            pos_hint: {"center_x":0.5, "y":0.225}
            font_size: SMALL_BUTTON_FONT_SIZE * root.font_ratio
            font_name: PATH_TEXT_FONT
            text: root.score_text
            size: self.size
            shorten: False
            text_size: (self.width,None)
            color: BLACK
            halign: "center"
            valign: "middle"
            line_height: 1.5

        Image:
            id: multiplier
            source: root.multiplier_image
            size_hint: (0.2, None)
            height: self.width
            pos_hint: {"x": 0.05, "center_y": 0.75}

        CountryStatCard:
            font_ratio: root.font_ratio
            size_hint: (0.3, 0.4)
            pos_hint: {"center_x": 0.5, "center_y": 0.75}
            flag_image: root.flag_image
            number_stars: root.nb_stars
            country_name: root.country_name
            color: root.primary_color
            shadow_color: TRANSPARENT

        Image:
            id: new_image
            source: root.new_image
            size_hint: (0.2, None)
            height: self.width
            pos_hint: {"right": 0.95, "center_y": 0.75}

<CountryLineScore>:

    CountryStatCard:
        font_ratio: root.font_ratio
        size_hint: (0.27, 0.9)
        pos_hint: {"x": 0, "center_y": 0.5}
        flag_image: root.flag_image
        flag_color: root.flag_color
        number_stars: root.nb_stars
        country_name: root.country_name
        color: root.continent_color
        shadow_color: TRANSPARENT

    Label:
        size_hint: (0.48, 0.9)
        pos_hint: {"x":0.32, "center_y": 0.5}
        font_size: SMALL_SCORE_FONT_SIZE * root.font_ratio
        font_name: PATH_TEXT_FONT
        text: root.text_label
        size: self.size
        shorten: False
        text_size: (self.width,None)
        color: root.continent_color
        halign: "left"
        valign: "middle"
        line_height: 1.4

    Label:
        size_hint: (0.2, 0.9)
        pos_hint: {"right":0.94, "center_y": 0.5}
        font_size: SMALL_SCORE_FONT_SIZE * root.font_ratio
        font_name: PATH_TEXT_FONT
        text: root.score_label
        size: self.size
        shorten: False
        text_size: (self.width,None)
        color: root.continent_color
        halign: "right"
        valign: "middle"
        line_height: 1.4

<EndGamePopup>:
    
    RelativeLayout:
        id: popup_layout
       
        canvas.after:
            Color:
                rgba: BLACK
            Line:
                width: BUTTON_OUTLINE_WIDTH*root.font_ratio
                points: (self.x+self.width*0.025, self.y+0.425*self.height, self.x+self.width*0.95, self.y+0.425*self.height)
            Line:
                width: BUTTON_OUTLINE_WIDTH*root.font_ratio
                points: (self.x+self.width*0.025, self.y+0.325*self.height, self.x+self.width*0.95, self.y+0.325*self.height)

        ColoredRoundedButton:
            id: ok_button
            size_hint: (0.5, 0.15)
            pos_hint: {"center_x":0.5,"center_y":0.12}
            font_ratio: root.font_ratio
            font_size: SMALL_BUTTON_FONT_SIZE
            text: root.ok_button_label
            text_font_name: PATH_TEXT_FONT
            background_color: GRAY
            color_label: root.primary_color
            release_function: root.confirm
        
        RelativeLayout:
            pos_hint: {"center_x": 0.5, "y": 0.45}
            size_hint: (0.95, 1 - 0.45 - 0.025)

            CustomScrollview:
                id: scrollview
                size_hint: (1, 1)
                pos_hint: {"center_x":0.5, "center_y":0.5}
                scroll_type: ["bars", "content"]
                do_scroll_x: False
                bar_width: 7*root.font_ratio
                bar_inactive_color: BLACK
                bar_color: GRAY

                MyScrollViewLayout:
                    id: scrollview_layout
                    cols: 1
                    spacing: 10*root.font_ratio
                    padding: (5*root.font_ratio, 0*root.font_ratio)

        ### Number of lives used ###

        Label:
            size_hint: (0.8, 0.05)
            pos_hint: {"x":0.05, "y":0.35}
            font_size: SMALL_BUTTON_FONT_SIZE * root.font_ratio
            font_name: PATH_TEXT_FONT
            text: root.number_lives_at_the_end_label
            size: self.size
            shorten: False
            text_size: (self.width,None)
            color: BLACK
            halign: "left"
            valign: "middle"

        Label:
            size_hint: (0.8, 0.05)
            pos_hint: {"right":0.9, "y":0.35}
            font_size: SMALL_BUTTON_FONT_SIZE * root.font_ratio
            font_name: PATH_TEXT_FONT
            text: str(root.number_lives_at_the_end*150)
            size: self.size
            shorten: False
            text_size: (self.width,None)
            color: BLACK
            halign: "right"
            valign: "middle"

        ### Total score ###

        Label:
            size_hint: (0.8, 0.05)
            pos_hint: {"x":0.05, "y":0.25}
            font_size: SMALL_BUTTON_FONT_SIZE * root.font_ratio
            font_name: PATH_TEXT_FONT
            text: root.total_score_label
            size: self.size
            shorten: False
            text_size: (self.width,None)
            color: BLACK
            halign: "left"
            valign: "middle"

        Label:
            size_hint: (0.8, 0.05)
            pos_hint: {"right":0.9, "y":0.25}
            font_size: SMALL_BUTTON_FONT_SIZE * root.font_ratio
            font_name: PATH_TEXT_FONT
            text: str(root.total_score)
            size: self.size
            shorten: False
            text_size: (self.width,None)
            color: BLACK
            halign: "right"
            valign: "middle"
